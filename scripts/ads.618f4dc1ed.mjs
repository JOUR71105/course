(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"z+Ii":function(t,e,i){"use strict";i.r(e);var n=function(t){return new Promise((e,i)=>{var n=document.createElement("script");n.src=t,n.async=!0,n.onload=e,n.onerror=i,document.body.appendChild(n)})};var s=function(t,e){return t instanceof Node||t instanceof Window?[t]:Array.prototype.slice.call("string"==typeof t?(e||document).querySelectorAll(t):t||[])},r=0;e.default=class{constructor(){var{adFields:t={adUnit:"/5805113/basic",dimensions:[300,250]},globalMappings:e={banner:[[[768,130],[[728,90]]]]},attributePrefix:i="dv-gpt-",gptSrc:n="https://www.googletagservices.com/tag/js/gpt.js",idPrefix:s="dv-gpt-",selector:r=".dv-gpt-ad",targetingKey:o="tribpedia",targetingValue:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.adFields=t,this.globalMappings=e,this.attributePrefix=i,this.gptSrc=n,this.idPrefix=s,this.selector=r,this.targetingKey=o,this.targetingValue=a,this.initialized=!1,this.slots=null,this.createAds=this.createAds.bind(this),this.onIntersection=this.onIntersection.bind(this),this.setupService=this.setupService.bind(this)}init(){if(!this.initialized){this.elements=s(this.selector),this.count=this.elements.length;this.observer=new IntersectionObserver(this.onIntersection,{rootMargin:"500px 0px",threshold:.01}),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],n(this.gptSrc).then(()=>{window.googletag.cmd.push(this.setupService,this.createAds),this.initialized=!0})}}setupService(){window.googletag.cmd.push(()=>{var t=window.googletag.pubads();this.targetingKey&&this.targetingValue&&t.setTargeting(this.targetingKey,this.targetingValue),t.disableInitialLoad(),window.googletag.enableServices()})}createAds(){var{adUnit:t,dimensions:e}=this.adFields,{banner:i}=this.globalMappings;this.elements.forEach(n=>{var s=function(t,e){var i=function(t){var e={};if(!t||1!==t.nodeType)return e;var i=t.attributes;if(0===i.length)return e;for(var n=0;n<i.length;n++)e[i[n].name]=i[n].value;return e}(t),n={};return Object.keys(i).forEach(function(t){if(t.substr(0,e.length)===e){var s=i[t],r=t.slice(e.length).replace(/[-_]+(\w?)/g,(t,e)=>e.toUpperCase());n[r]=s}}),n}(n,this.attributePrefix),o=Object.assign({},{adUnit:t,dimensions:e},s),a=function(t){var e=++r+"";return t?t+e:e}(this.idPrefix);n.setAttribute("id",a);var g=window.googletag.defineSlot(o.adUnit,o.dimensions,a);g.defineSizeMapping(i),o.targetingKey&&o.targetingValue&&g.setTargeting(o.targetingKey,o.targetingValue),g.setCollapseEmptyDiv(!0),g.addService(window.googletag.pubads()),window.googletag.display(a),n.__slot__=g,this.observer.observe(n)})}onIntersection(t){t.forEach(t=>{if(t.isIntersecting){var e=t.target;this.count-=1,this.observer.unobserve(e),window.googletag.pubads().refresh([e.__slot__]),this.count>0||this.observer.disconnect()}})}}}}]);
//# sourceMappingURL=ads.618f4dc1ed.mjs.map